<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" >
    <title>My first Bootstrap</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  </head>

<body>

	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
							<li class="active"><a href="#" >Home</a></li>
							<li><a href="#about">About</a></li>
							<li><a href="#contact">Contact</a></li>
							<li class="dropdown-open">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown<b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="#">Action</a></li>
									<li><a href="#">Another action</a></li>
									<li><a href="#">Something else here</a></li>
									<li class="divider"></li>
									<li class="dropdown-header">Nav header</li>									
									<li><a href="#">Separated link</a></li>
									<li><a href="#">One more separated link</a></li>
								</ul>
							</li>
						</ul>


				<form class="navbar-form navbar-right" role="form">
					<div class="form-group">
						<input type="text" placeholder="Имя" class="form-control">
					</div>
					<button type="submit" class="btn btn-success">Войти</button>
				</form>
			</div><!--/.navbar-collapse -->
		</div>
	</div>
<div id="myCarousel" class="carousel slide" >
	<!-- Индикаторы слайдов -->
	<ol class="carousel-indicators">
		<li class="active" data-target="#carousel" data-slide-to="0"></li>
		<li data-target="#myCarousel" data-slide-to="1"></li>
		<li data-target="#myCarousel" data-slide-to="2"></li>
	</ol>

	<!-- Слайды -->
	<div class="carousel-inner">
		<div class="item active">
			<img src="images/keyboard.jpg" height="800" width="1920" alt="">
		</div>
		<div class="item">
			<img src="images/color.jpg" height="800" width="1920" alt="">
		</div>
		<div class="item">
			<img src="images/drift.jpg" height="800" width="1920" alt="">
		</div>
	</div>

	<!-- Стрелки лоя слайдов -->
	<a href="#myCarousel" class="left carousel-control" data-slide="prev">
		<span class="glyphicon glyphicon-chevron-left"></span>
	</a>
	<a href="#myCarousel" class="right carousel-control" data-slide="next">
		<span class="glyphicon glyphicon-chevron-right"></span>
	</a>
</div>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-sm-4  clearfix">
				<img src="http://cs624931.vk.me/v624931056/1c01c/zqun4e_Iaco.jpg" alt="ololol" class="img-rounded clearfix">
				<img src="https://pp.vk.me/c623325/v623325921/21c81/VWBeDNa593Q.jpg" alt="ololol" class="img-rounded clearfix">				
				</div>
			<div class="col-md-4 col-sm-4  clearfix">
				<img src="https://pp.vk.me/c623925/v623925549/3a7a9/QZiRTheoiUs.jpg" alt="ololol" class="img-rounded clearfix">				
				<img src="http://cs624631.vk.me/v624631488/29a78/bUdniHw28hw.jpg" alt="ololol" class="img-rounded clearfix">
			</div>
			<div class="col-md-4 col-sm-4  clearfix">
				<img src="http://cs317516.vk.me/v317516981/9db2/uX-I2tIs0fQ.jpg" alt="ololol" class="img-rounded clearfix">
				<img src="http://cs617630.vk.me/v617630332/17b2a/DWPDNeCySkc.jpg" alt="ololol" class="img-rounded clearfix">
			</div>
		</div>
		<hr>
	</div>


	<div class="container">
	<div class="modal" id="modal1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button class="close" type="button" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Тут работает загрузка!</h4>
				</div>
				<div class="modal-body">
					<div class="row">
					    <hr>					
					      <div class="progress">
					      	<div id="progr" class="progress-bar progress-bar-info progress-bar progress-bar-striped active" style="min-width: 3%;">
					        <p id="c">0%</p>
					      </div>
					    </div>
						</div>
					 </div>
						
				<div id="foo" class="modal-footer">
					<button type="button" id="run" onclick="progress()" class="btn btn-lg btn-primary">Начать!</button>
				</div>
				</div>
			</div>
		</div>
	</div>    

  
<script>


var progr = document.getElementById("progr");
var c = document.getElementById("c");
var m = document.getElementById("modal1");
var run = document.getElementById("run");
var timer = 0;
    run.onclick = onElementClick;
    var running = false;
    function onElementClick() {  	
      if(running){
        return;
      	}	      	
 		progress();
 		running = true; 		
    }
		
var progress = function() {
	// run.removeAttribute('data-dismiss', 'modal');  // куда его вставить
	progr.style.width = timer + "%";
	if(timer >= 100) {		
		alert("Готово");
		run.innerHTML = "Готово!" 
		progr.classList.remove("progress-bar-info");			
		progr.classList.add("progress-bar-success");	
		run.classList.add("btn-success"); 
		run.classList.remove("btn-primary"); 
		run.innerHTML = "Готово!";
		run.setAttribute('data-dismiss', 'modal');	// куда его вставить
		timer = 0;	
		// возможно не хватает running = true;		
		return;				
	}
	run.onclick = function(){	// сейчас нажатие на изменившуюся "Готово!", кроме обнуления значений, запускат onElementClick(), что не дает повторно запускать прогресс.
		progr.style.width = timer + "%";
		c.innerHTML = timer + "%";		
		progr.classList.remove("progress-bar-success");
		progr.classList.add("progress-bar-info"); 
		run.classList.remove("btn-success"); 
		run.classList.add("btn-primary"); 
		run.innerHTML = "Начать";
		run.removeAttribute('data-dismiss', 'modal'); // куда его вставить
		running = false;	
	}
	timer++;
	c.innerHTML = timer + "%";
	setTimeout(function(){progress()}, 50);		
	return;
}

// запуск модального окна и обнуление всех значений - не знаю куда вставить
	m.onclick = function(){	

}




</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

</body>
</html>